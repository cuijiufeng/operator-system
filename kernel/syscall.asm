; 2020年08月22日 20/11/55
; 调用系统调用函数
;==================================================================================================

;==================================================================================================
NR_FORK		equ	0
;==================================================================================================

extern	findEmptyProcess
extern	copyProcess
global	fork
global	sysFork
;调用系统调用函数
;==================================================================================================
fork:
	mov eax, NR_FORK
	int 0x80
	ret
;==================================================================================================

;系统调用中断处理子函数
;==================================================================================================
sysFork:
	call findEmptyProcess
	cmp eax, -1
	je _1
	push esi
	push edi
	push ebp
	push eax
	call copyProcess
	add esp, 16
_1:
	ret
;==================================================================================================